# /mailviewer/views.py
画面名: メール一覧
  - 関数一覧:
    - 関数名: index
      - 関数説明: メール一覧を表示する
      - 処理:
        - post:
          - mailSearchFormから入力があった条件でmailデータを検索
          - データを取得
            - メインModel: mail: メールデータ
            - サブmodel: なし
            - 画面項目:
              - 項目: メールID
                - model: mail
                - カラム: email_id
              - 項目: タイトル
                - model: mail
                - カラム: subject
              - 項目: FROM
                - model: mail
                - カラム: sender
              - 項目: TO
                - model: mail
                - カラム: recipients
              - 項目: CC
                - model: mail
                - カラム: cc
              - 項目: 受信日
                - model: mail
                - カラム: sent_at
              - 項目: 本文
                - model: mail
                - カラム: body
              - 項目: 登録日
                - model: mail
                - カラム: insert_date
              - 項目: 更新日
                - model: mail
                - カラム: update_date
          - 0件: 
            - message: データがありません。
        - get:
          - mailsは0件 
         - コンテキスト:
            title: メール一覧
            message: message
            mails: mails
        - 表示するテンプレート: /templates/mailviewer/index.html

    - 関数名: input
      - 関数説明: emlファイルの取込画面
      - 処理:
        - post:
          - EmlUploadFormから入力があった条件でemlファイルをアップロード
          - アップロードされたファイルを処理
            - メールデータを作成
            - メールデータの保存
              - メインModel: mail: メールデータ
              - サブmodel: なし
              - 画面項目:
                - 項目: メールID
                  - model: mail
                  - カラム: email_id
                - 項目: タイトル
                  - model: mail
                  - カラム: subject
                - 項目: FROM
                  - model: mail
                  - カラム: sender
                - 項目: TO
                  - model: mail
                  - カラム: recipients
                - 項目: CC
                  - model: mail
                  - カラム: cc
                - 項目: 受信日
                  - model: mail
                  - カラム: sent_at
                  - フォーマット: YYYY-MM-DD HH:MM[:ss[.uuuuuu]][TZ]
                - 項目: 本文
                  - model: mail
                  - カラム: body
                  - 改行・空白も保存する
                - 項目: 登録日
                  - model: mail
                  - カラム: insert_date
                  - フォーマット: YYYY-MM-DD HH:MM[:ss[.uuuuuu]][TZ]
                - 項目: 更新日
                  - model: mail
                  - カラム: update_date
                  - フォーマット: YYYY-MM-DD HH:MM[:ss[.uuuuuu]][TZ]
          - 取込完了メッセージを表示
        - get:
          - コンテキスト:
            title: emlファイル取込
            message: message
        - 表示するテンプレート: /templates/mailviewer/input.html
    - 関数名: mail_detail
      - 関数説明: メール本文の詳細表示
      - 処理:
        - post:
          - なし
        - get:
          - mail_idを取得
          - mail_idに対応するメールデータを取得
          - メールデータをMailFormにセット
          - mail_idに対応する添付ファイルを取得: データが無くても正常
          - 添付ファイルをAttachFormにセット
          - コンテキスト:
            title: メール詳細
            mailForm: バインドしたMailForm
            attachForm: バインドしたAttachForm
        - 表示するテンプレート: /templates/mailviewer/mail_detail.html
